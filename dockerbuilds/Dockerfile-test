FROM mkaichen/rocnnet-test-env:latest

ENV RBUILD_DIR /usr/src/rocapp

RUN mkdir -p $RBUILD_DIR
WORKDIR $RBUILD_DIR

COPY . $RBUILD_DIR

# build rocnnet
RUN mkdir app/build && cd app/build && \
	cmake -DTENNCOR_TEST=ON .. && \
	cmake --build .;

CMD [ "bash", "./app/scripts/test/tests.sh", "|", "tee" ]
